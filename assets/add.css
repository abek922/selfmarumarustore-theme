/* =========================================================
   SELF 〇〇 STORE — MRST Header / Drawer + Slideshow (Clean)
   ========================================================= */

/* ---------- 基本カスタムプロパティ ---------- */
:root {
  --mrst-drawer-width: 320px;
  --mrst-drawer-bg: #ffffff;
}

/* ========== Header / Drawer ========== */

/* ハンバーガー */
.mrst-hamburger {
  width: 40px; height: 40px; min-width: 40px; min-height: 40px;
  display: inline-flex; align-items: center; justify-content: center;
  margin: 0; padding: 0; border: 0; background: transparent;
  cursor: pointer; line-height: 1; position: relative;
  appearance: none; -webkit-tap-highlight-color: transparent;
}
.mrst-hamburger:focus-visible { outline: 2px solid currentColor; outline-offset: 2px; }
.mrst-hamburger__bar {
  position: absolute; left: 50%; transform: translateX(-50%);
  width: 22px; height: 2px; background: currentColor; display: block;
  transition: transform .22s ease, width .18s ease, top .18s ease, bottom .18s ease, opacity .18s ease;
}
.mrst-hamburger__bar--top { top: 13px; }
.mrst-hamburger__bar--bottom { bottom: 13px; width: 14px; }
/* 開時に✗へ */
.mrst-hamburger.is-open .mrst-hamburger__bar--top { transform: translateX(-50%) rotate(45deg); }
.mrst-hamburger.is-open .mrst-hamburger__bar--bottom { transform: translateX(-50%) rotate(-45deg); width: 22px; }
/* 右端時の縦ズレ保険 */
.header__icons--right .mrst-hamburger { margin: 0; }

/* Drawer 本体 */
.mrst-drawer { position: fixed; inset: 0; z-index: 60; pointer-events: none; }
.mrst-drawer__overlay {
  position: absolute; inset: 0; background: rgba(0,0,0,.4);
  opacity: 1; transition: opacity .25s ease;
}
.mrst-drawer__panel {
  position: absolute; top: 0; bottom: 0;
  width: var(--mrst-drawer-width, 320px);
  background: var(--mrst-drawer-bg, #fff);
  box-shadow: 0 0 14px rgba(0,0,0,.18);
  transition: transform .25s ease;
  display: flex; flex-direction: column; outline: none;
}
/* スライド方向 */
.mrst-drawer[data-side="left"]  .mrst-drawer__panel { left: 0;  transform: translateX(-100%); }
.mrst-drawer[data-side="right"] .mrst-drawer__panel { right: 0; transform: translateX(100%); }
/* aria-hidden で開閉 */
.mrst-drawer[aria-hidden="true"] .mrst-drawer__overlay { opacity: 0; }
.mrst-drawer[aria-hidden="false"] { pointer-events: auto; }
.mrst-drawer[aria-hidden="false"] .mrst-drawer__panel { transform: translateX(0); }

/* Drawer 内部 */
.mrst-drawer__header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 14px 16px; border-bottom: 1px solid rgba(0,0,0,.08);
}
.mrst-drawer__title { font-weight: 600; }
.mrst-drawer__close { background: none; border: 0; font-size: 24px; line-height: 1; cursor: pointer; }
.mrst-drawer__close:focus-visible { outline: 2px solid currentColor; outline-offset: 2px; }
.mrst-drawer__nav { overflow: auto; padding: 8px 0 24px; }

.mrst-drawer__list, .mrst-drawer__sublist { list-style: none; margin: 0; padding: 0; }
.mrst-drawer__link, .mrst-drawer__sublink { display: block; text-decoration: none; }
.mrst-drawer__link { padding: 12px 16px; }
.mrst-drawer__sublink { padding: 8px 16px; opacity: .85; }
.mrst-drawer__link:hover, .mrst-drawer__sublink:hover { text-decoration: underline; }
.mrst-drawer__sublist { padding-left: 8px; }
.mrst-group { padding-top: 8px; }
.mrst-group__title { font-weight: 700; font-size: 14px; padding: 10px 16px 6px; opacity: .8; }
.mrst-group__divider { margin: 10px 0; border: 0; border-top: 1px solid rgba(0,0,0,.08); }
.mrst-drawer__empty { padding: 12px 16px; opacity: .75; }

/* Responsive */
@media (max-width: 480px) {
  .mrst-drawer__panel { width: min(100vw, var(--mrst-drawer-width, 320px)); }
}

/* Motion reduce */
@media (prefers-reduced-motion: reduce) {
  .mrst-hamburger__bar, .mrst-drawer__overlay, .mrst-drawer__panel { transition: none; }
}

/* Dark scheme（背景色はセクション設定優先） */
@media (prefers-color-scheme: dark) {
  .mrst-drawer__panel { background: var(--mrst-drawer-bg, #121212); }
  .mrst-group__divider { border-top-color: rgba(255,255,255,.12); }
}

/* ========== Header 補助 ========== */

/* 検索幅（デスクトップ） */
@media (min-width: 1024px) {
  .mrst-enabled .header__search { max-width: 28rem; width: 100%; }
  .mrst-enabled .header__search input,
  .mrst-enabled .header__search .predictive-search { max-width: 100%; height: 40px; line-height: 40px; }
}

/* ロゴ直後に検索を寄せる（デスクトップ）。※セクション内{% style %}想定スコープ */
#shopify-section-{{ section.id }} .header__top { column-gap: 8px !important; }
@media (min-width: 1024px) {
  .mrst-enabled .header__search {
    justify-self: start !important; align-self: center !important;
    --mrst-search-width: 28rem;
    width: var(--mrst-search-width) !important; max-width: var(--mrst-search-width) !important; margin: 0 !important;
  }
  .mrst-enabled .header__search form,
  .mrst-enabled .header__search .predictive-search,
  .mrst-enabled .header__search input { width: 100% !important; max-width: 100% !important; height: 40px; line-height: 40px; }
}

/* 画像アイコンのサイズ統一 */
.mrst-enabled .mrst-icon-img {
  display: block; width: var(--mrst-icon-img, 24px); height: var(--mrst-icon-img, 24px);
  object-fit: contain; line-height: 1;
}

/* カートアイコンの背景を常に透明（テーマ既定のSolidを上書き） */
@media (min-width: 640px) {
  #shopify-section-{{ section.id }} .cart-icon--solid {
    background-color: transparent !important; box-shadow: none !important;
  }
}

/* ===== MRST Slideshow — 形式2(ドットのみ)・内側表示の安定化 ===== */

/* スライド全体を相対基準に（絶対配置の基準を明示） */
#shopify-section-{{ section.id }} .slideshow-wrapper {
  position: relative;
}

/* 「内側」のときのドットコンテナを、確実にスライド内に収める */
#shopify-section-{{ section.id }} .mrst-swiper-controls--style-2:not(.mrst--outside) {
  position: absolute !important;
  left: 50% !important;
  bottom: 14px !important;          /* ← 余白を少し持たせて欠けを防止 */
  transform: translateX(-50%) !important;
  width: auto !important;
  background: transparent !important;
  box-shadow: none !important;
  -webkit-backdrop-filter: none !important;
  backdrop-filter: none !important;
  z-index: 5;                        /* 画像やオーバーレイより前面に */
  pointer-events: auto;
}

/* テーマ既存の「下に浮かせる」系クラスを打ち消し（はみ出し防止） */
#shopify-section-{{ section.id }} .mrst-swiper-controls--style-2:not(.mrst--outside).swiper-controls,
#shopify-section-{{ section.id }} .mrst-swiper-controls--style-2:not(.mrst--outside).swiper-controls--float-bottom {
  inset: auto !important;
  top: auto !important;
  right: auto !important;
  bottom: 14px !important;
  left: 50% !important;
  transform: translateX(-50%) !important;
}

/* ドット行のレイアウト（純粋な丸のみ・中央寄せ） */
#shopify-section-{{ section.id }} .mrst-swiper-controls--style-2 .swiper-pagination {
  position: static !important;       /* 親の中央寄せに従わせる */
  display: flex !important;
  align-items: center;
  justify-content: center;
  gap: 10px;
  margin: 0;
  min-height: 18px;                  /* アクティブ拡大の欠け対策 */
  visibility: visible !important;
  opacity: 1 !important;
  background: transparent !important;
  background-color: transparent !important;
  box-shadow: none !important;
}

/* ドット（丸）— シンプル固定。横長化を完全に無効化 */
#shopify-section-{{ section.id }} .mrst-swiper-controls--style-2 .swiper-pagination-bullet {
  width: 10px !important;
  height: 10px !important;
  border-radius: 50% !important;
  margin: 0 !important;
  background: currentColor !important;      /* 単色ドット */
  opacity: .35 !important;                  /* 非アクティブは薄め */
  transform: none !important;
  transition: transform .18s ease, opacity .18s ease !important;
}

/* アクティブは少し濃く＆拡大のみ（横に伸びない） */
#shopify-section-{{ section.id }} .mrst-swiper-controls--style-2 .swiper-pagination-bullet.swiper-pagination-bullet-active {
  opacity: 1 !important;
  transform: scale(1.25) !important;
}

/* hover(PC)で軽く強調（任意） */
@media (hover:hover) {
  #shopify-section-{{ section.id }} .mrst-swiper-controls--style-2 .swiper-pagination-bullet:hover {
    opacity: .7 !important;
  }
}

/* モバイルは間隔を少し詰める（任意） */
@media (max-width: 767px) {
  #shopify-section-{{ section.id }} .mrst-swiper-controls--style-2 .swiper-pagination {
    gap: 8px;
  }
}
